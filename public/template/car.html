<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="css/car.css"/>
    <link rel="stylesheet" type="text/css" href="css/public.css"/>
    
</head>
<body>
<header>
			<ul class="margin">
				<li class="badge">
				<a href="goods.html" class="top"><i>
					<img src="image/shop.png" class="shop"/>
				</i>购物车</a>
				<div class="yincang">
					<p>你的购物车空空如也</p>
				</div>
				</li>
			
				<li><a href="#" class="top">客服热线：400 - 7796 - 400</a></li>
				<li class="a1">|</li>
				<li><a href="#" class="top">帮助中心</a></li>
				<li class="a1">|</li>
				<li><a href="#" class="b2">我的PBA▼</a>
					<div class="xianshi">
						<p><a href="#">小心行事</a></p>
						<p><a href="#">小心行事</a></p>	
						<p><a href="#">小心行事</a></p>
						<p><a href="#">小心行事</a></p>
					</div>
				</li>
				<li class="a1">|</li>
				<li><a href="denglu.html" class="top">登录</a></li>
				<li class="a1">|</li>
				<li><a href="zhuce.html" class="top">注册</a></li>
			</ul>
		</header>
		
		<nav>
			<div class="margin clear">
				<div class="nav-left">
					<a href="#" class="logo"><img src="image/logo.png"/></a>
				</div>
				<div class="nav-right">
					<ul>
						<li><a href="#" class="nav-t">所有商品</a></li>
						<li><a href="#" class="nav-t">养肤护肤</a></li>
						<li><a href="#" class="nav-t">彩妆香水</a></li>
						<li><a href="#" class="nav-t">工具洗护</a></li>
						<li><a href="#" class="nav-t">美容仪器</a></li>
						<li><a href="#" class="nav-t">美容食品</a></li>
						<li><a href="#" class="nav-t">新品上市</a></li>
						<li><a href="#" class="nav-t">顾问查询</a></li>
						
					</ul>
				</div>
				<div class="nav-form">
					<table class="sreach">
						<input type="search" class="sea" placeholder="搜索你需要的商品" />
						<input type="submit" class="sub" value=""/>
					</table>
				</div>
			</div>	
		</nav>
	<div class="shop">
	    <table border="1" width="800" align="center" cellspacing="0">
	        <thead>
	            <tr>
	                <th>图片</th>
	                <th>名字</th>
	                <th>价格</th>
	                <th>操作</th>
	            </tr>
	        </thead>
	        <tbody>
	            <!-- <tr>
	                <td>Date</td>
	                <td>Date</td>
	                <td>Date</td>
	                <td><span>删除</span></td>
	            </tr> -->
	        </tbody>
	    </table>
  </div>  
</body>
<script src="js/data.js" type="text/javascript" charset="utf-8"></script>
<script src="js/cookie.js" type="text/javascript" charset="utf-8"></script>
<script>
    
    // 1.拿到总数据
    // 2.拿到cookie
    // 3.将总数据和cookie做比较，在cookie中存在的数据，渲染页面

    // 4.删除
    var otbody = document.querySelector("tbody");
    var arr = document.cookie.split("; ");

    var str = "";
    for(var i=0;i<arr.length;i++){
        for(var j=0;j<json.length;j++){
            if(arr[i].split("=")[1] == json[j].goodsId){
                str += "<tr data-id='"+ json[j].goodsId +"'>"+
                            "<td><img src='"+ json[j].src +"'></td>"+
                            "<td>"+ json[j].name +"</td>"+
                            "<td>"+ json[j].price +"</td>"+
                            "<td><span>删除</span></td>"+
                        "</tr>";
            }
        }
    }
    otbody.innerHTML = str;

    // 删除按钮的功能：事件委托
    otbody.addEventListener("click",function(eve){
        var e = eve || window.event;
        var target = e.target || e.srcElement;
        if(target.tagName == "SPAN"){
            // 删除DOM元素
            target.parentNode.parentNode.remove()
            // 删除cookie数据
            var id = target.parentNode.parentNode.getAttribute("data-id");
            removeCookie(id);
        }
    })

</script>
</html>